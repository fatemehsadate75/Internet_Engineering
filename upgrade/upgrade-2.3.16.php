<?php
 if (!defined('_PS_VERSION_')) exit; function upgrade_module_2_3_16($object) { $ranginesmspresta = new RangineSmsPresta; $lastRANGINE_SMS_kfadeliverytimetheme = Configuration::get('RANGINE_SMS_kfadeliverytimetheme'); if($lastRANGINE_SMS_kfadeliverytimetheme == '') $lastRANGINE_SMS_kfadeliverytimetheme = '{w} {d} {mm} {y} از {from} تا {to}'; Configuration::updateValue('RANGINE_SMS_kfadeliverytimetheme1', $lastRANGINE_SMS_kfadeliverytimetheme); Configuration::updateValue('RANGINE_SMS_kfadeliverytimetheme2', '{w} {d} از {from} تا {to}'); Configuration::updateValue('RANGINE_SMS_kfadeliverytimetheme3', 'از {from} تا {to}'); $allRules = unserialize(Configuration::get($ranginesmspresta->prefix.'SMS_RULES')); foreach($allRules as $rule){ if($rule['ruleBase'] == 'carrier') { $carrier = new Carrier((int) $rule['ruleConditionValue']); $rule['ruleConditionValue'] = $carrier->id_reference; } $newRules[] = $rule; } Configuration::updateValue($ranginesmspresta->prefix .'SMS_RULES', serialize($newRules)); return true; } 